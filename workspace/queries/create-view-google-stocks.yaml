name: create-view-google-stocks
query: |
  CREATE OR REPLACE VIEW
    ${var.env}.finance.slv_star_google_stock_prices 
  AS 
    SELECT
      * 
    FROM 
      ${var.env}.finance.slv_star_stock_prices 
    WHERE
      symbol = 'GOOGL'
warehouse_id: ${var.sql_tasks_warehouse_id}
parent: folders/${var.directory-/queries/views/}
run_as_role: viewer
permissions:
  - group_name: account users
    permission_level: CAN_VIEW
  - group_name: role-engineers
    permission_level: CAN_RUN